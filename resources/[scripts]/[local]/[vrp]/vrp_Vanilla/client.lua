--===============================================--===============================================
--= stationary radars based on 	https://github.com/DreanorGTA5Mods/StationaryRadar	         =
--===============================================--===============================================

vrp_VanillaS = Tunnel.getInterface("vrp_Vanilla", "vrp_Vanilla")

local radares = {
	{x = -247.43843078613, y = -643.06024169922, z = 33.374897003174}, -- 메인차고
	{x = -244.55407714844, y = -643.66827392578, z = 33.384078979492}, -- 메인차고
	{x = -242.62846374512, y = -643.54119873047, z = 33.371807098389}, -- 메인차고
	{x = -250.80453491211, y = -642.35211181641, z = 33.374111175537}, -- 메인차고
	{x = -256.77020263672, y = -641.62316894531, z = 33.347785949707}, -- 메인차고
	{x = -261.46185302734, y = -640.75439453125, z = 33.301956176758}, -- 메인차고
	{x = -56.224796295166, y = -120.07131958008, z = 57.944080352783}, -- 퍼시픽 가위 4거리
	{x = -56.47176361084, y = -123.63340759277, z = 57.939491271973}, -- 퍼시픽 가위 4거리
	{x = -56.372871398926, y = -125.52281188965, z = 57.917171478271}, -- 퍼시픽 가위 4거리
	{x = -56.78141784668, y = -116.30805969238, z = 57.950965881348}, -- 퍼시픽 가위 4거리
	{x = -56.094264984131, y = -112.6237487793, z = 57.945678710938}, -- 퍼시픽 가위 4거리
	{x = -57.195091247559, y = -109.64869689941, z = 57.940135955811}, -- 퍼시픽 가위 4거리
	{x = -57.014434814453, y = -105.31480407715, z = 57.90754699707}, -- 퍼시픽 가위 4거리
	{x = -67.753814697266, y = -87.756370544434, z = 57.801502227783}, -- 퍼시픽 가위 4거리
	{x = -71.788787841797, y = -87.413162231445, z = 57.863418579102}, -- 퍼시픽 가위 4거리
	{x = -74.697982788086, y = -86.739761352539, z = 57.860324859619}, -- 퍼시픽 가위 4거리
	{x = -76.155647277832, y = -86.355369567871, z = 57.844303131104}, -- 퍼시픽 가위 4거리
	{x = -92.565330505371, y = -93.68913269043, z = 57.845821380615}, -- 퍼시픽 가위 4거리
	{x = -93.672386169434, y = -97.409439086914, z = 57.866565704346}, -- 퍼시픽 가위 4거리
	{x = -95.66429901123, y = -101.69536590576, z = 57.86986541748}, -- 퍼시픽 가위 4거리
	{x = -96.498962402344, y = -104.0570602417, z = 57.877563476563}, -- 퍼시픽 가위 4거리
	{x = -98.748611450195, y = -107.55360412598, z = 57.855575561523}, -- 퍼시픽 가위 4거리
	{x = -101.39682769775, y = -112.66010284424, z = 57.747905731201}, -- 퍼시픽 가위 4거리
	{x = -92.769378662109, y = -126.56925964355, z = 57.83171081543}, -- 퍼시픽 가위 4거리
	{x = -88.347869873047, y = -128.69320678711, z = 57.888122558594}, -- 퍼시픽 가위 4거리
	{x = -82.702377319336, y = -130.52020263672, z = 57.905784606934}, -- 퍼시픽 가위 4거리
	{x = -79.40625, y = -132.0305480957, z = 57.937244415283}, -- 퍼시픽 가위 4거리
	{x = -74.720474243164, y = -133.72547912598, z = 57.879425048828}, -- 퍼시픽 가위 4거리
	{x = -230.99111938477, y = -44.896751403809, z = 49.50658416748}, -- 로스산토스 커스텀근처
	{x = -231.58805847168, y = -49.794132232666, z = 49.53881072998}, -- 로스산토스 커스텀근처
	{x = -231.67585754395, y = -54.759689331055, z = 49.531112670898}, -- 로스산토스 커스텀근처
	{x = -231.56196594238, y = -60.691040039063, z = 49.556777954102}, -- 로스산토스 커스텀근처
	{x = -232.54447937012, y = -64.951690673828, z = 49.554599761963}, -- 로스산토스 커스텀근처
	{x = -231.41667175293, y = -68.06519317627, z = 49.63257598877}, -- 로스산토스 커스텀근처
	{x = -508.07046508789, y = -376.97399902344, z = 35.106590270996}, -- 병원
	{x = -508.59979248047, y = -381.58532714844, z = 35.055473327637}, -- 병원
	{x = -509.70529174805, y = -367.28030395508, z = 35.217864990234}, -- 병원
	{x = -509.09344482422, y = -361.87106323242, z = 35.228202819824}, -- 병원
	{x = -763.10455322266, y = -661.90856933594, z = 30.245698928833}, -- 시청 가까운 편의점 2칸위
	{x = -763.27783203125, y = -664.67706298828, z = 30.212678909302}, -- 시청 가까운 편의점 2칸위
	{x = -761.392578125, y = -653.50891113281, z = 30.267477035522}, -- 시청 가까운 편의점 2칸위
	{x = -760.63757324219, y = -649.45739746094, z = 30.196075439453}, -- 시청 가까운 편의점 2칸위
	{x = -747.06597900391, y = -639.71295166016, z = 30.256439208984}, -- 시청 가까운 편의점 2칸위
	{x = -742.29388427734, y = -639.57232666016, z = 30.286911010742}, -- 시청 가까운 편의점 2칸위
	{x = -746.75225830078, y = -677.79510498047, z = 30.298023223877}, -- 시청 가까운 편의점 2칸위
	{x = -742.68579101563, y = -677.57293701172, z = 30.296630859375}, -- 시청 가까운 편의점 2칸위
	{x = -723.00927734375, y = -665.73205566406, z = 30.192464828491}, -- 시청 가까운 편의점 2칸위
	{x = -723.44067382813, y = -662.04626464844, z = 30.270206451416}, -- 시청 가까운 편의점 2칸위
	{x = -723.97662353516, y = -653.82067871094, z = 30.270248413086}, -- 시청 가까운 편의점 2칸위
	{x = -724.58544921875, y = -649.55737304688, z = 30.264026641846}, -- 시청 가까운 편의점 2칸위
	{x = 385.00985717773, y = -1039.5631103516, z = 29.269529342651}, -- 경찰서
	{x = 384.52981567383, y = -1043.3138427734, z = 29.256616592407}, -- 경찰서
	{x = 385.03765869141, y = -1049.0675048828, z = 29.228593826294}, -- 경찰서
	{x = 385.01718139648, y = -1054.0980224609, z = 29.219314575195}, -- 경찰서
	{x = 385.36608886719, y = -1059.4399414063, z = 29.198961257935}, -- 경찰서
	{x = 385.53802490234, y = -1064.1632080078, z = 29.232231140137}, -- 경찰서
	{x = -169.69026184082, y = -874.70281982422, z = 29.308731079102}, -- 시청 4 사거리
	{x = -173.53648376465, y = -872.75744628906, z = 29.34934425354}, -- 시청 4 사거리
	{x = -177.62129211426, y = -871.96826171875, z = 29.349340438843}, -- 시청 4 사거리
	{x = -183.42344665527, y = -869.68597412109, z = 29.349332809448}, -- 시청 4 사거리
	{x = -188.3461151123, y = -868.5458984375, z = 29.306802749634}, -- 시청 4 사거리
	{x = -203.71170043945, y = -875.51007080078, z = 29.294635772705}, -- 시청 4 사거리
	{x = -206.86776733398, y = -880.87768554688, z = 29.353958129883}, -- 시청 4 사거리
	{x = -208.48223876953, y = -885.16619873047, z = 29.353538513184}, -- 시청 4 사거리
	{x = -209.76969909668, y = -889.64801025391, z = 29.349317550659}, -- 시청 4 사거리
	{x = -211.73770141602, y = -894.04992675781, z = 29.310947418213}, -- 시청 4 사거리
	{x = -204.21501159668, y = -910.50201416016, z = 29.312286376953}, -- 시청 4 사거리
	{x = -200.06146240234, y = -912.373046875, z = 29.349050521851}, -- 시청 4 사거리
	{x = -195.78907775879, y = -914.13671875, z = 29.3489112854}, -- 시청 4 사거리
	{x = -190.5987701416, y = -915.6533203125, z = 29.348999023438}, -- 시청 4 사거리
	{x = -185.19560241699, y = -917.26196289063, z = 29.290748596191}, -- 시청 4 사거리
	{x = -170.71011352539, y = -909.07220458984, z = 29.309808731079}, -- 시청 4 사거리
	{x = -168.87425231934, y = -905.24041748047, z = 29.349031448364}, -- 시청 4 사거리
	{x = -166.53416442871, y = -900.36645507813, z = 29.34930229187}, -- 시청 4 사거리
	{x = -164.76853942871, y = -895.05621337891, z = 29.3493309021}, -- 시청 4 사거리
	{x = -162.81558227539, y = -890.45812988281, z = 29.294157028198}, -- 시청 4 사거리
	{x = 151.33364868164, y = -809.47015380859, z = 31.180477142334},
	{x = 149.75430297852, y = -814.26922607422, z = 31.180477142334},
	{x = 147.89738464355, y = -819.27233886719, z = 31.148061752319},
	{x = 152.05596923828, y = -805.99200439453, z = 31.180488586426},
	{x = 154.17242431641, y = -801.65795898438, z = 31.151010513306}
}

Citizen.CreateThread(
	function()
		while true do
			Wait(0)
			for k, v in pairs(radares) do
				local player = GetPlayerPed(-1)
				local coords = GetEntityCoords(player, true)
				if Vdist2(radares[k].x, radares[k].y, radares[k].z, coords["x"], coords["y"], coords["z"]) < 10 then
					Citizen.Trace("estas pasando por un radar")
					checkSpeed()
				end
			end
		end
	end
)

function checkSpeed()
	local pP = GetPlayerPed(-1)
	local speed = GetEntitySpeed(pP)
	local vehicle = GetVehiclePedIsIn(pP, false)
	local driver = GetPedInVehicleSeat(vehicle, -1)
	local maxspeed = 120
	local kmhspeed = math.ceil(speed * 3.6)
	if kmhspeed > maxspeed and driver == pP then
		Citizen.Wait(250)
		vrp_VanillaS.cobrarMulta()
	end
end
